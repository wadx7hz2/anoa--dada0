!function(){"use strict";var e={n:function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,{a:r}),r},d:function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=React,r=e.n(t),n=ReactDOM;var a=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[a,s]=(0,t.useState)(!n),[o,i]=(0,t.useState)(!1),[l,c]=(0,t.useState)(null),[p,u]=(0,t.useState)(null);if(!wp.ajax)return void console.error("Please use wp-util as a dependency");const d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(!0),i(!1),c(null),wp.ajax.post(e,{...r,...t}).done((e=>{u(e),s(!1)})).fail((e=>{i(!0),c(e),s(!1)}))},h=async function(){d(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})};return(0,t.useEffect)((()=>{n||d(r)}),[]),{data:p,saveData:h,refetch:h,isLoading:a,isError:o,error:l}};var s=function(e){let t=document.createElement("template");return t.innerHTML=e,t.content.firstChild};var o=e=>{let t=null;try{t=JSON.parse(e)}catch(e){console.warn(e.message)}return t};var i=function(e){return/^(?:(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([a-zA-Z0-9_-]+))$/.test(e)?e:!!/^[a-zA-Z0-9_-]{11}$/.test(e)&&`https://www.youtube.com/watch?v=${e}`},l=Symbol.for("immer-nothing"),c=Symbol.for("immer-draftable"),p=Symbol.for("immer-state");function u(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var d=Object.getPrototypeOf;function h(e){return!!e&&!!e[p]}function m(e){return!!e&&(f(e)||Array.isArray(e)||!!e[c]||!!e.constructor?.[c]||w(e)||E(e))}var y=Object.prototype.constructor.toString();function f(e){if(!e||"object"!=typeof e)return!1;const t=d(e);if(null===t)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===y}function _(e,t){0===v(e)?Object.entries(e).forEach((([r,n])=>{t(r,n,e)})):e.forEach(((r,n)=>t(n,r,e)))}function v(e){const t=e[p];return t?t.type_:Array.isArray(e)?1:w(e)?2:E(e)?3:0}function b(e,t){return 2===v(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function g(e,t,r){const n=v(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function w(e){return e instanceof Map}function E(e){return e instanceof Set}function S(e){return e.copy_||e.base_}function k(e,t){if(w(e))return new Map(e);if(E(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&f(e)){if(!d(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const r=Object.getOwnPropertyDescriptors(e);delete r[p];let n=Reflect.ownKeys(r);for(let t=0;t<n.length;t++){const a=n[t],s=r[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(d(e),r)}function R(e,t=!1){return T(e)||h(e)||!m(e)||(v(e)>1&&(e.set=e.add=e.clear=e.delete=P),Object.freeze(e),t&&_(e,((e,t)=>R(t,!0)))),e}function P(){u(2)}function T(e){return Object.isFrozen(e)}var O,j={};function L(e){const t=j[e];return t||u(0),t}function $(){return O}function C(e,t){t&&(L("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function z(e){I(e),e.drafts_.forEach(A),e.drafts_=null}function I(e){e===O&&(O=e.parent_)}function N(e){return O={drafts_:[],parent_:O,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function A(e){const t=e[p];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function x(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[p].modified_&&(z(t),u(4)),m(e)&&(e=M(t,e),t.parent_||q(t,e)),t.patches_&&L("Patches").generateReplacementPatches_(r[p].base_,e,t.patches_,t.inversePatches_)):e=M(t,r,[]),z(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==l?e:void 0}function M(e,t,r){if(T(t))return t;const n=t[p];if(!n)return _(t,((a,s)=>F(e,n,t,a,s,r))),t;if(n.scope_!==e)return t;if(!n.modified_)return q(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const t=n.copy_;let a=t,s=!1;3===n.type_&&(a=new Set(t),t.clear(),s=!0),_(a,((a,o)=>F(e,n,t,a,o,r,s))),q(e,t,!1),r&&e.patches_&&L("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function F(e,t,r,n,a,s,o){if(h(a)){const o=M(e,a,s&&t&&3!==t.type_&&!b(t.assigned_,n)?s.concat(n):void 0);if(g(r,n,o),!h(o))return;e.canAutoFreeze_=!1}else o&&r.add(a);if(m(a)&&!T(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;M(e,a),t&&t.scope_.parent_||q(e,a)}}function q(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&R(t,r)}var D={get(e,t){if(t===p)return e;const r=S(e);if(!b(r,t))return function(e,t,r){const n=B(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!m(n)?n:n===W(e.base_,t)?(X(e),e.copy_[t]=U(n,e)):n},has(e,t){return t in S(e)},ownKeys(e){return Reflect.ownKeys(S(e))},set(e,t,r){const n=B(S(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=W(S(e),t),o=n?.[p];if(o&&o.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(((a=r)===(s=n)?0!==a||1/a==1/s:a!=a&&s!=s)&&(void 0!==r||b(e.base_,t)))return!0;X(e),V(e)}var a,s;return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return void 0!==W(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,X(e),V(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=S(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){u(11)},getPrototypeOf(e){return d(e.base_)},setPrototypeOf(){u(12)}},H={};function W(e,t){const r=e[p];return(r?S(r):e)[t]}function B(e,t){if(!(t in e))return;let r=d(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=d(r)}}function V(e){e.modified_||(e.modified_=!0,e.parent_&&V(e.parent_))}function X(e){e.copy_||(e.copy_=k(e.base_,e.scope_.immer_.useStrictShallowCopy_))}_(D,((e,t)=>{H[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),H.deleteProperty=function(e,t){return H.set.call(this,e,t,void 0)},H.set=function(e,t,r){return D.set.call(this,e[0],t,r,e[0])};function U(e,t){const r=w(e)?L("MapSet").proxyMap_(e,t):E(e)?L("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:$(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=D;r&&(a=[n],s=H);const{revoke:o,proxy:i}=Proxy.revocable(a,s);return n.draft_=i,n.revoke_=o,i}(e,t);return(t?t.scope_:$()).drafts_.push(r),r}function Y(e){if(!m(e)||T(e))return e;const t=e[p];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=k(e,t.scope_.immer_.useStrictShallowCopy_)}else r=k(e,!0);return _(r,((e,t)=>{g(r,e,Y(t))})),t&&(t.finalized_=!1),r}var J=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...a){return n.produce(e,(e=>t.call(this,e,...a)))}}let n;if("function"!=typeof t&&u(6),void 0!==r&&"function"!=typeof r&&u(7),m(e)){const a=N(this),s=U(e,void 0);let o=!0;try{n=t(s),o=!1}finally{o?z(a):I(a)}return C(a,r),x(n,a)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===l&&(n=void 0),this.autoFreeze_&&R(n,!0),r){const t=[],a=[];L("Patches").generateReplacementPatches_(e,n,t,a),r(t,a)}return n}u(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,(t=>e(t,...r)));let r,n;return[this.produce(e,t,((e,t)=>{r=e,n=t})),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){m(e)||u(8),h(e)&&(e=function(e){h(e)||u(10);return Y(e)}(e));const t=N(this),r=U(e,void 0);return r[p].isManual_=!0,I(t),r}finishDraft(e,t){const r=e&&e[p];r&&r.isManual_||u(9);const{scope_:n}=r;return C(n,t),x(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=L("Patches").applyPatches_;return h(e)?n(e,t):this.produce(e,(e=>n(e,t)))}},K=J.produce;J.produceWithPatches.bind(J),J.setAutoFreeze.bind(J),J.setUseStrictShallowCopy.bind(J),J.applyPatches.bind(J),J.createDraft.bind(J),J.finishDraft.bind(J);const Z=e=>{const t=e.split("/");return t[t.length-1].replace(/\.[^/.]+$/,"")};var G=class{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.media=e,this.isPremium=n,this.features=r,this.options=K(t,(e=>{e.markers.enabled=!0,e.speed.options=t.speed.options.map((e=>parseFloat(e))),e.ads.enabled=!1,e.fullscreen={container:".plyr_wrapper",iosNative:!0}})),t.urls.enabled||(this.options=K(this.options,(e=>{e.urls.download=null}))),this.media.closest(".plyr_wrapper")?.offsetWidth<=425&&(this.options=K(this.options,(e=>{e.controls=this.options.controls.filter((e=>!["fast-forward","restart","rewind"].includes(e)))}))),this.options.muted?this.options=K(this.options,(e=>{e.volume=0,e.storage.enabled=!1})):this.options=K(this.options,(e=>{e.volume=.5,e.storage.enabled=!0})),this.player=new Plyr(this.media,this.options),"m3u8"===this.media.src?.split(".").pop()&&this.videoHls(),"mpd"===this.media.src?.split(".").pop()&&this.videoDash(),this.init(),this.player.on("pause",(()=>{this.features.disablePause&&this.player.play()}))}setIsPremium(e){this.isPremium=e}init(){if(!this.player)return void console.error("something went wrong!");const e=this.features.qualities?.map((e=>({type:`video/${e?.video_file?.split(".").pop()}`,size:e.size,src:e.video_file})))||[],t=this.features.captions?.map(((e,t)=>{const r=e.label.split("/");return{kind:"captions",size:e.size,label:r[0],srclang:r[1],src:e.caption_file}}))||[];this.player.download=this.player.source,this.player.source={type:"video",sources:[{src:this.player.source,type:"video/mp4",size:720},...e],poster:this.player.poster&&"false"!==this.player.poster?this.player.poster:""},t.map((e=>{if(e?.src){const t=document.createElement("track");Object.assign(t,e),this.player.media.appendChild(t)}})),this.player.on("play",(()=>{window.location.pathname.includes("/wp-admin")&&(this.player.pause(),this.player.currentTime=0)})),"object"==typeof this.features&&(this.makeElementSticky(this.features.sticky),this.createChapter(),this.watermark(this.features.watermark),this.thumbInPause(this.features?.thumbInPause),this.autoplayWhenVisible(),this.pauseOther(),this.createView()),this.player.on("play",(()=>{this.disabled&&(this.player.currentTime=0,this.player.pause())})),this.player.on("ready",(()=>{this.media.plyr=this.player,this.features.startTime&&setTimeout((()=>{this.player.currentTime=parseInt(this.features.startTime)}),200),this.options.autoplay&&this.player.play(),this.controlTouchAction()}))}createView(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.player.on("pause",(()=>{if(!this.videoId||!this.isPremium)return;let t=!1;const r=this.player.currentTime;let n=localStorage.getItem(`video-progress-max-${this.videoId}`),a=new Date;n?n=JSON.parse(n):localStorage.setItem(`video-progress-max-${this.videoId}`,JSON.stringify({currentTime:r,created_at:a}));const s=(a-new Date(n?.created_at))/6e4;let o=!1;o=e?this.player.playing&&(r>=n?.currentTime||s>1440):r>=n?.currentTime||s>1440,o&&(s>1440&&(n.created_at=a),n.currentTime=this.player.currentTime,localStorage.setItem(`video-progress-max-${this.videoId}`,JSON.stringify(n)),t||(t=!0,wp.ajax.post("h5vp_ajax_handler",{nonce:this.nonce,model:"View",method:"createOrUpdate",video_id:this.videoId,duration:parseInt(this.player.currentTime)}).done((e=>{console.log(e)})).fail((e=>{console.log(e)}))))}))}autoplayWhenVisible(){if(this.features.playWhenVisible){let e=!1;this.player.on("ready",(()=>{window.addEventListener("scroll",(()=>{if(!this.isPremium)return!1;this.player.elements?.container?.offsetParent?.offsetTop<window.scrollY&&!e&&(this.player.muted=!0,this.player.play(),e=!0)}))}))}}makeElementSticky(e){if(!e?.enabled)return!1;const t=this.player.elements.fullscreen;if(t&&this.player){const r=t.getBoundingClientRect().top,n=s("<span class='close'>&times;</span>");window.addEventListener("scroll",(()=>{if(!this.isPremium)return;const a=t.querySelector(".close");window.scrollY>=r&&this.player.playing?(t.classList.add(e.position),t.classList.add("sticky"),a||t.appendChild(n)):this.player.playing||(t.classList.remove("sticky"),t.classList.remove(e.position)),n.addEventListener("click",(()=>{t.classList.remove(e.position),t.classList.remove("sticky"),this.player.pause()}))}))}}createChapter(){const e=this.player?.elements?.container,t=this.options.markers.points.map((e=>({...e,time:this.chapterTimeToSeconds(e.time)})));if(!Array.isArray(t)||!e)return!1;const r=e.querySelector(".h5vp-chapter-wrapper");if(!t||r||!t.length)return!1;const n=document.createElement("div"),a=document.createElement("div"),s=document.createElement("button"),o=document.createElement("div");s.classList="h5vp-chapter-button plyr__controls__item plyr__control",s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 487.3 487.3"> <path d="M487.2,69.7c0,12.9-10.5,23.4-23.4,23.4h-322c-12.9,0-23.4-10.5-23.4-23.4s10.5-23.4,23.4-23.4h322.1 C476.8,46.4,487.2,56.8,487.2,69.7z M463.9,162.3H141.8c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1 c12.9,0,23.4-10.5,23.4-23.4C487.2,172.8,476.8,162.3,463.9,162.3z M463.9,278.3H141.8c-12.9,0-23.4,10.5-23.4,23.4 s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,288.8,476.8,278.3,463.9,278.3z M463.9,394.3H141.8 c-12.9,0-23.4,10.5-23.4,23.4s10.5,23.4,23.4,23.4h322.1c12.9,0,23.4-10.5,23.4-23.4C487.2,404.8,476.8,394.3,463.9,394.3z M38.9,30.8C17.4,30.8,0,48.2,0,69.7s17.4,39,38.9,39s38.9-17.5,38.9-39S60.4,30.8,38.9,30.8z M38.9,146.8 C17.4,146.8,0,164.2,0,185.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,146.8,38.9,146.8z M38.9,262.8 C17.4,262.8,0,280.2,0,301.7s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9S60.4,262.8,38.9,262.8z M38.9,378.7 C17.4,378.7,0,396.1,0,417.6s17.4,38.9,38.9,38.9s38.9-17.4,38.9-38.9C77.8,396.2,60.4,378.7,38.9,378.7z"/> </svg><span class="plyr__tooltip">Chapter</span>',n.classList="h5vp-chapter-wrapper",a.classList="h5vp-chapter-list-wrapper",o.classList="h5vp-chapter-list",t.map((t=>{if(""!=t?.label&&""!=t?.time){const r=this.chapterTimeToSeconds(t?.time),n=document.createElement("button");n.innerHTML=`<span>${t?.label}</span>`,o.appendChild(n),n.onclick=()=>{o.classList.remove("showing"),this.player.currentTime=r,this.player.play()},s.onclick=()=>{o.classList.contains("showing")?o.classList.remove("showing"):o.classList.add("showing")},e.addEventListener("click",(function(e){o.contains(e.target)||s.contains(e.target)||o.classList.contains("showing")&&o.classList.remove("showing")})),this.onClick(e.querySelector(".plyr__controls__item.plyr__menu button"),(function(){o.classList.contains("showing")&&o.classList.remove("showing")}))}})),a?.appendChild(o),this.player.on("ready",(()=>{const t=e.querySelector(".plyr__controls__item.plyr__volume"),r=e.querySelector(".plyr__controls__item.plyr__menu"),n=e.querySelector(".plyr__controls__item[data-plyr='fullscreen']"),o=e.querySelector(".plyr__controls__item.plyr__time--current.plyr__time");t?t.before(s):r?r.before(s):n?n.before(s):o&&o.before(s),e.querySelector(".plyr__controls")?.after(a)}))}watermark(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{enabled:t,type:r,text:n,color:a}=e,s=this.player.elements?.container;if(!s||!t)return!1;let o=n;setTimeout((async()=>{if(["email","name"].includes(r))try{this.disabled=!0,console.log(this.nonce);const e=await wp.ajax.post("watermark_data",{nonce:this.nonce||window.h5vpBlock?.nonce});o=e.user[r]||window.location.origin,this.disabled=!1}catch(e){this.disabled=!1}let e="watermark";this.player.on("play",(()=>{if(!this.isPremium)return!1;const t=setInterval((()=>{const t=document.querySelector(e);t&&s.removeChild(t),e="watermark"+Math.round(1e3*Math.random());const n=document.createElement(e);n.setAttribute("style","display: block !important"),"email"===r&&(n.innerText=o),s.appendChild(n),n.innerText=o,n.setAttribute("style",`position:absolute; display:block !important; opacity:1 !important;top: ${Math.round(90*Math.random())}% !important; left: ${Math.round(70*Math.random())}% !important; transform: none !important`),n.style.color=a,s.appendChild(n)}),2e3);this.player.on("pause",(()=>{setTimeout((()=>{clearInterval(t);const r=document.querySelector(e);r&&s.removeChild(r)}),0)}))}))}),100)}thumbInPause(){if(this.features?.thumbInPause?.enabled)if("custom"==this.features.thumbInPause?.type){const e=document.createElement("img");e.src=this.player.poster;const t=this.player?.elements?.buttons?.play?.[0];this.player.on("ready",(()=>{const t=this.player?.elements?.buttons?.play?.[0];t&&(t.classList.add("thumbInPause"),t.appendChild(e))})),this.player.on("play",(()=>{t.classList.remove("thumbInPause")})),this.player.on("pause",(()=>{t.classList.add("thumbInPause")}))}else this.player.on("pause",(()=>{this.player?.elements?.container&&this.player?.elements?.container.classList.add("plyr--stopped")}))}destroy(){this.player?.destroy()}chapterTimeToSeconds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.toString().match(/(\d+):(\d+)/);return null==t?parseInt(e):60*parseInt(t[1])+parseInt(t[2])}getTTT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return e/100*t-e/100*(100-t)}onClick(e,t){e&&e.addEventListener("click",t)}setNonce(e){this.nonce=e}setVideoId(e){this.videoId=e}videoHls(){const e=()=>{if(window.Hls?.isSupported()){const e=new window.Hls;e.loadSource(this.media.src),this.player.on("ready",(()=>{e.attachMedia(this.player.media)})),e.on(Hls.Events.MANIFEST_PARSED,(()=>{["metadata","none"].includes(this.options.preload)&&setTimeout((()=>{e.stopLoad()}),1e3),this.player.on("play",(function(){e.startLoad()}))})),this.player?.on("languagechange",(()=>{setTimeout((()=>e.subtitleTrack=this.player.currentTrack),50)}))}else console.warn("Hls does not support")};let t=document.getElementById("h5vp-hls-js");t?e():(t=document.createElement("script"),t.setAttribute("id","h5vp-hls-js"),t.src=this.local?.hls,document.getElementsByTagName("head")[0]?.prepend(t),t?.addEventListener("load",(()=>e())))}videoDash(){let e=document.getElementById("h5vp-dash-js");if(e){dashjs.MediaPlayer().create().initialize(this.player.media,this.media.src,!0),this.player=new Plyr(this.player.media)}else e=document.createElement("script"),e.setAttribute("id","h5vp-dash-js"),e.src=this.local?.dash,document.getElementsByTagName("head")[0]?.prepend(e),e.addEventListener("load",(()=>{dashjs.MediaPlayer().create().initialize(this.media,this.media.src,!0)}))}controlTouchAction(){if(document.body.offsetWidth>992)return!1;const e=this.player.elements?.container;if(!e)return!1;const t=this.player,r=e.querySelector(".plyr__video-wrapper"),n=document.createElement("span");n.classList.add("seekSecond"),r.appendChild(n),t.eventListeners.forEach((t=>{"dblclick"===t.type&&e.removeEventListener(t.type,t.callback,t.options)})),r.parentNode.addEventListener("dblclick",(e=>{let t=e.target.getBoundingClientRect(),a=e.clientX-t.left;this.player.fullscreen.active&&(r.offsetWidth-150<a&&r.offsetWidth/2<a?(this.player.forward(this.options.seekTime),n.innerText=this.options.seekTime+" sec"):r.offsetWidth/2>a&&a<150&&(this.player.rewind(this.options.seekTime),n.innerText="-"+this.options.seekTime+" sec"),setTimeout((()=>{n.innerText=""}),1e3)),a>150&&a<r.offsetWidth-150&&this.player.fullscreen.toggle()})),e.addEventListener("touchstart",(e=>{this.player.fullscreen.active&&(this.touchClientX=e.touches[0].clientX,this.touchClientY=e.touches[0].clientY)}),!1),e.addEventListener("touchend",(e=>{if(!this.player.fullscreen.active)return;let r,a;r=e.changedTouches[0].clientX-this.touchClientX,a=e.changedTouches[0].clientY-this.touchClientX,r>5?(t.forward(parseInt(r)/10),n.innerText=parseInt(r/10)+" sec"):r<-5&&(t.rewind(Math.abs(r)/10),n.innerText=parseInt(r/10)+" sec"),setTimeout((()=>{n.innerText=""}),1e3)}),!1)}pauseOther(){if(location.pathname.includes("wp-admin"))return!1;window.hpublic?.pauseOther&&this.player.on("play",(()=>{const e=this.player.elements.fullscreen?.dataset?.uniqueId;document.querySelectorAll(`video:not([data-unique-id="${e}"] video, a video)`).forEach((e=>e.pause()))}))}domAttributesToObjectList(e){const t=[];return e.forEach((e=>{const r=e.attributes,n={};for(let e=0;e<r.length;e++){const t=r[e];n[t.name]=t.value}t.push(n)})),t}};var Q=e=>{let{enabled:t,items:r}=e;return t?React.createElement(React.Fragment,null,r.map(((e,t)=>React.createElement(React.Fragment,null,React.createElement("style",null,`\n              .overlay_item_${t} p{\n                padding: 5px 12px;\n              }\n              .overlay_item_${t} p,\n              .overlay_item_${t} img,\n              .overlay_item_${t} a {\n              color: ${e.color};\n              font-size: ${e.fontSize};\n              background-color: ${e.backgroundColor};\n              border-radius: 3px px;\n              opacity: ${e.opacity}\n            }\n            .overlay_item_${t} a:hover,\n            .overlay_item_${t} p:hover {\n              color: ${e.hoverColor};\n            }\n            `.replace(/\s+/g," ")),React.createElement("div",{key:t,className:`h5vp_overlay ${e.position} overlay_item_${t}`},"text"===e.type?React.createElement("p",null,e.link?React.createElement("a",{href:e.link,rel:"noreferrer",target:"_blank"},e.text):React.createElement(React.Fragment,null,e.text)):e.link?React.createElement("a",{className:"background-transparent",href:e.link,rel:"noreferrer",target:"_blank"},React.createElement("img",{src:e.logo})):React.createElement("img",{src:e.logo})))))):React.createElement(React.Fragment,null)};wp.i18n;var ee=e=>{let{setOpen:r,popup:n,poster:a}=e;const{align:s,enabled:o,btnStyle:i,hasBtn:l,selector:c,type:p,btnText:u}=n,{padding:d,...h}=i||{};return(0,t.useEffect)((()=>{"button"===p&&l&&c&&o&&document.querySelector([".","#","["].includes(c)?`${c}`:`.${c}`)?.addEventListener("click",(()=>{r(!0)}))}),[]),React.createElement(React.Fragment,null,o&&React.createElement("div",{className:"button"===p?`flex justify-${s}`:""},l&&"poster"!==p?React.createElement(React.Fragment,null):React.createElement(React.Fragment,null,"button"===p?React.createElement("button",{className:"popup_opener",onClick:()=>r(!0),style:{...h,padding:Object.values(d).join(" ")}},u):React.createElement(React.Fragment,null,a?React.createElement("div",{className:"popup_opener"},React.createElement("svg",{"aria-hidden":"true",focusable:"false",className:"popup_play",onClick:()=>r(!0)},React.createElement("use",{xlinkHref:"#plyr-play"})),React.createElement("img",{src:a,width:"100%"})):React.createElement("h3",null,"Poster missing"))),React.createElement("span",{onClick:()=>r(!1),className:"close"},"×")))};function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}var re=e=>{let{captions:t,poster:n,source:a,qualities:s,isPremium:o,className:i="",reference:l,...c}=e;return r().createElement(r().Fragment,null,r().createElement("video",te({className:i,id:"player","data-poster":n||"",ref:l,src:a},c,{style:{width:"100%",maxWidth:"100%"}}),o&&r().createElement(r().Fragment,null,Array.isArray(t)&&t.map(((e,t)=>{if(!e.caption_file)return;const n=e.label.split("/");return r().createElement("track",{key:t,kind:"captions",srcLang:n[1]||" ",label:n[0]||"no label",src:e.caption_file})})),!["m3u8","mpd"].includes(a.split(".").pop())&&r().createElement(r().Fragment,null,r().createElement("source",{src:a,size:720,type:`video/${a?.split(".").pop()}`}),Array.isArray(s)&&s.map(((e,t)=>r().createElement("source",{key:t,src:e.video_file,size:e.size,type:"video/mp4"})))))),c["data-poster"]&&r().createElement("div",{className:"preload_poster",style:{background:`url(${c["data-poster"]})`}}))};function ne(){return ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ne.apply(this,arguments)}var ae=e=>{let{source:t="https://www.youtube.com/watch?v=MLpWrANjFbI",className:r="",...n}=e;return React.createElement("div",ne({className:`plyr__video-embed ${r}`,id:"player"},n),React.createElement("iframe",{src:`${t}?origin=${window.location.origin}&iv_load_policy=3&amp;modestbranding=1&amp;playsinline=1&amp;showinfo=0&amp;rel=0&amp;enablejsapi=1`,allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),n["data-poster"]&&React.createElement("div",{className:"preload_poster",style:{background:`url(${n["data-poster"]})`}}))};var se=function(e){if(!e)return!1;const t=/^(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/(video\/)?(\d+)(\/[^\s]*)?$/,r=e?.match(t)?.[5];return r?`https://player.vimeo.com/video/${r}`:isNaN(e)?t.test(e):`https://player.vimeo.com/video/${e}`};var oe=e=>{let{endScreen:r,player:n}=e;const{enabled:a,text:s,btnText:o,btnLink:i}=r,l=(0,t.useRef)(null);(0,t.useEffect)((()=>{n?.player?.on("ended",(()=>{console.log("ended"),a&&(n.player.stop(),l.current.style.display="block",console.log("workign"))}))}),[n]);return React.createElement(React.Fragment,null,a&&React.createElement(React.Fragment,null,React.createElement("div",{ref:l,className:"h5vp_end_screen"},React.createElement("span",{className:"close",onClick:()=>{l.current.style.display="none"}},"×"),React.createElement("div",{className:"content"},React.createElement("p",null,s),o&&React.createElement("a",{target:"_blank",rel:"noreferrer",href:i},o)))))};var ie=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};var le=e=>{let{styles:r={},uniqueId:n}=e;const[a,s]=(0,t.useState)(null);return(0,t.useEffect)((()=>{let e="";"object"==typeof r&&Object.keys(r).map((t=>{if("object"==typeof r[t]){let a="";Object.keys(r[t]).map((e=>{a+=`${ie(e)}: ${r[t][e]};`})),e+=`#${n} ${[".","#"].includes(t[0])?"":"."}${t}{${a}} `}})),s(e)}),[r,n]),React.createElement("style",{dangerouslySetInnerHTML:{__html:a}})};function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ce.apply(this,arguments)}var pe=e=>{let{source:t="https://player.vimeo.com/video/76979871",className:n="",...a}=e;return r().createElement("div",ce({className:`plyr__video-embed ${n}`,id:"player"},a),r().createElement("iframe",{src:`${t}?loop=false&amp;byline=false&amp;portrait=false&amp;title=false&amp;speed=true&amp;transparent=0&amp;gesture=media`,allowfullscreen:!0,allowtransparency:!0,allow:"autoplay"}),a["data-poster"]&&r().createElement("div",{className:"preload_poster",style:{background:`url(${a["data-poster"]})`}}))};var ue=function(e){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";let r="";for(let n=0;n<e;n++){const e=Math.floor(52*Math.random());r+=t.charAt(e)}return r};function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},de.apply(this,arguments)}var he=e=>{let{attributes:r,nonce:n=window.h5vpBlock?.nonce}=e;const{additionalCSS:s,additionalID:o,source:l,poster:c,provider:p,qualities:u,captions:d,options:h,features:m,uniqueId:y,styles:f}=r;window.attributes=r;const{popup:_,overlay:v,endScreen:b,hideYoutubeUI:g}=m,[w,E]=(0,t.useState)(null),[S,k]=(0,t.useState)(!1),[R,P]=(0,t.useState)("library"===p?"self-hosted":p),{autoplay:T,muted:O,loop:j}=h,{data:L,isLoading:$}=a("pipe_handler",{nonce:n}),{data:C,refetch:z}=a("h5vp_ajax_handler",{nonce:n,method:"create",model:"Video"},!0),I=(0,t.useRef)(null);return(0,t.useEffect)((()=>{S?w?.player.play():w?.player.pause()}),[S]),(0,t.useEffect)((()=>{I.media=I.current?.querySelector("#player")}),[I]),(0,t.useEffect)((()=>(setTimeout((()=>{const e=I.current?.querySelector("#player");if(e){const t=new G(e,h,{...m,qualities:u,captions:d});E(t)}}),100),()=>{w?.player?.destroy()})),[h,m,u,d,I.current]),(0,t.useEffect)((()=>{w&&!w?.nonce&&w.setNonce(n),w&&!w?.videoId&&w.setVideoId(C)}),[n,C]),(0,t.useEffect)((()=>{w&&w.setIsPremium(L),$||L||"self-hosted"===R||w?.destroy()}),[L,$,R]),(0,t.useEffect)((()=>{R||(i(l)?P("youtube"):se(l)?P("vimeo"):P("self-hosted"))}),[l]),(0,t.useEffect)((()=>{l&&R&&z({src:l,type:R,title:Z(l)})}),[l,R]),(0,t.useEffect)((()=>{w?.player&&(w.player.poster=c,w.player.source=l)}),[l,c]),React.createElement("div",{ref:I,id:y,className:`h5vp_player_temp  ${_.enabled?"h5vp_popup_enabled":""} ${S?"h5vp_popup_open":""}`},React.createElement(le,{styles:f,uniqueId:y}),React.createElement("style",null,s),L&&React.createElement(ee,{setOpen:k,popup:_,poster:c}),React.createElement("div",{className:"plyr_wrapper "+(g?"hideUI":""),id:o,"data-unique-id":ue(5)},React.createElement(React.Fragment,null,"vimeo"===R&&React.createElement(pe,{source:se(l)}),"youtube"===R&&React.createElement(ae,{source:i(l)})),"self-hosted"===R&&React.createElement(re,{qualities:u,captions:d,source:l,poster:c,autoPlay:T,muted:O,loop:j?.active,preload:h.preload,isPremium:L,playsInline:h.playsinline}),L&&React.createElement(React.Fragment,null,React.createElement(oe,{endScreen:b,player:w}),React.createElement(Q,de({},v,{player:w?.player})))))};document.addEventListener("DOMContentLoaded",(function(){ye()}));const me=e=>r().createElement(he,e);window.addEventListener("elementor/frontend/init",(function(){elementorFrontend.hooks.addAction("frontend/element_ready/H5VPPlayer.default",(function(e,t){ye()}))}));const ye=()=>{const e=document.querySelectorAll(".html5_video_players");e?.forEach((e=>{const t=o(e.dataset.attributes);if(e.removeAttribute("data-attributes"),e.removeAttribute("data-data"),!t)return!1;const a=e.dataset.nonce;if("object"==typeof t&&e){(0,n.createRoot)(e).render(r().createElement(me,{attributes:t,nonce:a}))}}))}}();
//# sourceMappingURL=frontend.js.map